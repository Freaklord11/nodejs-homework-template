(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[57272],{950743:function(e,t,n){"use strict";t.Z=function(e,t){const n=t?.inlineComments??[];return{type:e.taskType,initialInlineComments:n,projectName:"NA",projectId:e.project,params:e.params,assignmentId:e._id,featureFlags:{canSeeInlineComments:!s.default.isEmpty(n),canLeaveInlineComments:!1,shouldSkipLTDValidation:!0},metadata:e.metadata}};var o,s=(o=n(298784))&&o.__esModule?o:{default:o}},513473:function(e,t,n){"use strict";t.Hm=void 0;var o,s=n(854358),i=n(963494),r=n(673793),a=(o=n(298784))&&o.__esModule?o:{default:o},l=n(810755);const c="__FIELD_ID_DELIMITER__/",d=(e,t)=>{let n=0,o=0;for(let s=0;s<e.responses.length;s++){const o=t.responses[s],i=e.responses[s];if(!n&&o.step_id!==i.step_id){n=s;break}}if(n)for(let i=e.responses.length-1;i>n;i--){if(e.responses[i].type===s.InteractionStepType.MultiTurnContinue){o=i;break}}if(n||o){const s=a.default.cloneDeep(e.responses);s.splice(n,o-n+1);for(let e=n;e<t.responses.length;e++)s[e].index=e;return s}return e.responses};function u({stepType:e,responseIndex:t,fieldId:n,candidateIndex:o,likertValue:s}){const i=(()=>{if(!n)return;const e=n.split(c);return 2===e.length?e[1]:void 0})(),r=i?` | Field: ${i}`:"";return void 0!==o?`${e} | #Response: ${t+1} | #Candidate: ${o+1}${s?` | Rating: ${s}`:""}${r}`:`${e} | #Response: ${t+1}${r}`}function f({stepType:e,responseIndex:t,label:n,start:o,end:s}){return`${e} | #Response: ${t+1} | Label: ${n} | Start: ${o} | End: ${s}`}async function p(e,t,n,o,c){let d=c?y(e):h(e);const f=c?y(o):h(o);f&&(d=function(e,t){const n=a.default.cloneDeep(e),o=[];for(const[s,r]of Object.entries(t.annotations))r.type===i.TextCollectionFieldType.Boolean&&o.push({fieldId:s,annotation:r});for(const s of o)Object.keys(n.annotations).includes(s.fieldId)||!1!==s.annotation.response[0]||(n.annotations[s.fieldId]=s.annotation);return n}(d,f));return(await r.textCollectionTransformFn(d,t,n,f)).map((e=>{const t=e.frames[0].chatTaskAnnotationMetadata;l.assertDefined(t);const n=u({stepType:c?s.InteractionStepType.TextCollectionPerResponse:s.InteractionStepType.TextCollection,fieldId:e.frames[0].field_id,...t}),o=(()=>{let e="";return a.default.isNil(t.responseIndex)||(e+=`${t.responseIndex}`),a.default.isNil(t.candidateIndex)||(e+=`/${t.candidateIndex}`),a.default.isNil(t.originalFieldId)||(e+=`/${t.originalFieldId}`),e})();return{props:{...e.props,label:n,id:o},frames:a.default.fromPairs(Object.entries(e.frames).map((([e,n])=>[e,{...n,chatTaskAnnotationMetadata:t,chatGraderAnnotationType:"textcollection"}])))}}))}function h(e){if(!e)return;const t={annotations:{}};for(const n of e.responses){const e=n.index;if(n.type===s.InteractionStepType.TextCollection||n.type===s.InteractionStepType.QualityMeasurement){const o=a.default.fromPairs(Object.entries(n.context.response.annotations).filter((([e,t])=>t.type!==i.TextCollectionFieldType.FieldSet)).map((([t,o])=>{const s=`${e}/${c}${t}`;return[s,{...o,field_id:s,chatTaskAnnotationMetadata:{stepId:n.step_id,responseIndex:e,originalFieldId:t}}]})));Object.assign(t.annotations,o)}}return t}function y(e){if(!e)return;const t={annotations:{}};for(const n of e.responses){const e=n.index;n.type===s.InteractionStepType.TextCollectionPerResponse&&Object.entries(n.context.annotations).forEach((([o,s])=>{const r=n.context.candidates.find((e=>e.id===o))?.index??-1,l=a.default.fromPairs(Object.entries(s.annotations).filter((([e,t])=>t.type!==i.TextCollectionFieldType.FieldSet)).map((([t,o])=>{const s=`${e}/${r}/${c}${t}`;return[s,{...o,field_id:s,chatTaskAnnotationMetadata:{stepId:n.step_id,responseIndex:e,candidateIndex:r,originalFieldId:t}}]})));Object.assign(t.annotations,l)}))}return t}t.Hm=e=>{if(e)switch(e.chatGraderAnnotationType){case"textcollection":return e.response?.[0]?.given;case"namedentityrecognition":return e.text;case"model-response-selector":return m(e);case"processsupervision":return e.rating;case"model-response-ranking":return e.rankings}};const m=e=>{if(!e)return;if(-1===e.selectedIndex)return;const t=void 0!==e.likertValueRaw?`, Score: ${e.likertValueRaw}`:"";return`${void 0!==e.selectedIndex?`Response ${e.selectedIndex+1}`:e.selectedId}${t}`}},952302:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTextCollectionGraderDiffResponse=t.getFieldDefinitionsWithFieldSet=t.getFieldDefinitions=t.matchFieldSetResponseArray=t.compareFieldSet=t.compareFieldSets=t.compareUnitField=t.compareUnitFields=void 0;var o=u(n(298784)),s=n(222357),i=n(889794),r=n(963494),a=n(934788),l=u(n(952256)),c=n(764848),d=n(918397);function u(e){return e&&e.__esModule?e:{default:e}}const f=["name"],p=["option_name","item_name"],h=["category_menu_hours"],y=e=>{if(e.type===r.TextCollectionFieldType.FieldSet)return e.response.map((e=>(e=>{const t=o.default.sortBy(Object.entries(e),"field_id");for(const[s,i]of t)if(i.type===r.TextCollectionFieldType.Text&&o.default.some(f,(e=>s.toLowerCase().endsWith(e))))return o.default.sortBy(i.response).join("-");const[,n]=t[0];return y(n).join("-")})(e)));if(e.type===r.TextCollectionFieldType.Datetime){return o.default.sortBy(e.response,["year","month","day","hour","minute"]).map((e=>`${e.year}-${e.month}-${e.day}-${e.hour}-${e.minute}`))}return o.default.sortBy(e.response).map((e=>String(e)))},m=(e,t)=>{let n=0,s=0,r=0,a=0;const l=[];o.default.map(t,((e,t)=>{i.isUnitFieldAnnotation(e)&&!h.includes(t)&&l.push(t)}));for(const o of l){const i=t[o],l=e[o];if(void 0===l)continue;const{distance:c,maxDistance:d,isName:u,noCriticalOverlap:f}=g(l,i);if(u&&f)return 10;u?(n=c,s=d):(r+=c,a=d)}const c=a?r/a:0,d=s?n/s:0;return a&&s?o.default.mean([d,c]):a?c:s?d:0};t.compareUnitFields=m;const g=(e,t)=>{let n=0,s=0,i=!1;const d=t.type===r.TextCollectionFieldType.Text&&o.default.some(f,(e=>t.field_id.toLowerCase().endsWith(e)));if(d){const o=e.response?.[0]||"",r=t.response?.[0]||"",a=o?.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),d=r?.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");if(p.includes(t.field_id)){const e=c.gradeFreeText(a,d,c.TextComparisonMethod.TokenIOU);i=!!e.totalWork&&0===e.correctWork}n=l.default(a,d)/Math.max(a.length,d.length),s=1}else{const o=y(t),i=y(e);a.redundantIou(o,i)<.5&&(n=1),s=1}return{distance:n,maxDistance:s,isName:d,noCriticalOverlap:i}};t.compareUnitField=g;const v=(e,t)=>{let n=0,s=0;const r=[];return o.default.map(t,((e,t)=>{i.isFieldSetAnnotation(e)&&r.push(t)})),o.default.map(r,(o=>{const i=t[o],r=e[o];if(void 0===r||0===i.response.length)return;const{distance:a,maxDistance:l}=x(r,i);n+=a,s+=l})),s?n/s:0};t.compareFieldSets=v;const x=(e,t)=>{const n=T(e.response,t.response),s=o.default.filter(n,(e=>!!e.givenAnnotation&&!!e.expectedAnnotation)),i=o.default.filter(n,(e=>!e.givenAnnotation));return{distance:1-s.length/(s.length+i.length),maxDistance:1}};t.compareFieldSet=x;const T=(e,t,n,s,i,r)=>{const a=[],l=o.default.cloneDeep(e);if(1===e.length&&1===t.length)return[{givenAnnotation:e[0],expectedAnnotation:t[0]}];const c=o.default.flatten(l.map(((e,a)=>t.map(((t,l)=>{const c=((e,t,n=!1,s=!1,i=!1)=>{if(s)return 1-+n;if(0===Object.entries(t).length)return 1;let r=0,a=0;const l=[];return r=m(e,t),l.push(r),i&&(a=v(e,t),l.push(a)),o.default.mean(l)-.2*+n})(e,t,!!n?.[a]&&n?.[a]===s?.[l],!!i,!!r);return{i:a,j:l,distance:c}}))))),d=o.default.sortBy(c,"distance"),u={},f={};d.forEach((({i:e,j:t,distance:n})=>{if(e in u||t in f||n>.7)return;const o={distance:n};u[e]={idx:t,metadata:o},f[t]={idx:e,metadata:o}}));const p=[];t.map(((e,t)=>{const n=f?.[t]?.idx;if(void 0!==n){const t=l[n];p.push(n),a.push({givenAnnotation:t,expectedAnnotation:e})}else a.push({givenAnnotation:void 0,expectedAnnotation:e})})),o.default.pullAt(l,p);for(const o of l)a.push({givenAnnotation:o,expectedAnnotation:void 0});return a};t.matchFieldSetResponseArray=T;const A=(e,t,n)=>{const o=[];if(i.isFieldSetAnnotation(e))for(const i of e.response){const e={};for(const[o,s]of Object.entries(i))e[o]=A(s,t,n);t===s.GraderResult.Extraneous?o.push({result:t,given:e}):o.push({result:t,expected:e})}else for(const i of e.response)t===s.GraderResult.Extraneous?o.push({result:t,given:i}):o.push({result:t,expected:i});const a=e.type===r.TextCollectionFieldType.TranscriptionText?{field_id:e.field_id,type:e.type,response:o,tags:e.tags}:{field_id:e.field_id,type:e.type,response:o};return e.fieldWasReadOnly&&(a.fieldWasReadOnly=e.fieldWasReadOnly),e.chatTaskAnnotationMetadata&&(a.chatTaskAnnotationMetadata=e.chatTaskAnnotationMetadata),C(a,n),a},F=e=>e.map((e=>(e??"").trim().replace(/\s+/g," "))),_=(e,t,n)=>{if(i.isFieldSetAnnotation(t))return((e,t,n)=>{const o=[],i=T(e.response,t.response,e.uuids,t.uuids,n?.context?.useOnlyUuids,!0);for(const r of i){const e=r.givenAnnotation,t=r.expectedAnnotation,i=R(e,t,n);void 0===e?o.push({result:s.GraderResult.Missing,expected:i}):void 0===t?o.push({result:s.GraderResult.Extraneous,given:i}):o.push({result:s.GraderResult.Matched,given:i,hasCorrectChildren:!0})}return{field_id:t.field_id,type:r.TextCollectionFieldType.FieldSet,response:o}})(e,t,n);if(i.isUnitFieldAnnotation(t)){const o=((e,t)=>{const n=[],o=e.type===r.TextCollectionFieldType.Text||e.type===r.TextCollectionFieldType.Autocomplete?F(e.response):e.response,i=t.type===r.TextCollectionFieldType.Text||t.type===r.TextCollectionFieldType.Autocomplete?F(t.response):t.response;for(const r of a.redundantIntersection(o,i))n.push({result:s.GraderResult.Correct,given:r});const l=a.redundantDifference(i,o),c=a.redundantDifference(o,i),d=Math.min(l.length,c.length);for(let r=0;r<d;++r)n.push({result:s.GraderResult.Incorrect,given:c[r],expected:l[r]});l.slice(d).forEach((e=>n.push({result:s.GraderResult.Missing,expected:e}))),c.slice(d).forEach((e=>n.push({result:s.GraderResult.Extraneous,given:e})));const u=t.type===r.TextCollectionFieldType.TranscriptionText?{field_id:t.field_id,type:t.type,response:n,tags:t.tags}:{field_id:t.field_id,type:t.type,response:n};return t.fieldWasReadOnly&&(u.fieldWasReadOnly=t.fieldWasReadOnly),e.chatTaskAnnotationMetadata&&(u.chatTaskAnnotationMetadata=e.chatTaskAnnotationMetadata),u})(e,t);return C(o,n.fieldDefinitions),o}return{field_id:"rlhf_history",type:t.type,response:[]}},C=(e,t)=>{if(e.type===r.TextCollectionFieldType.Category&&t[e.field_id]){const n=t[e.field_id];for(const t of e.response){const e=t;e.categoryMetadata={given:{},expected:{}},e.result!==s.GraderResult.Correct&&e.result!==s.GraderResult.Incorrect&&e.result!==s.GraderResult.Extraneous||(e.categoryMetadata.given=d.getAllCategoryFullPathLabels(n.choices,e.given)),e.result!==s.GraderResult.Missing&&e.result!==s.GraderResult.Incorrect||(e.categoryMetadata.expected=d.getAllCategoryFullPathLabels(n.choices,e.expected))}}},b=(e,t)=>{switch(t){case"all_fields":return e;case"no_field":return{};default:return o.default.fromPairs(Object.entries(e).filter((([e])=>t.includes(e))))}},R=(e,t,n)=>{const{matchedAnnotations:o,missingAnnotations:i,extraneousAnnotations:r}=((e,t)=>{if(void 0===e&&void 0===t)return{missingAnnotations:{},extraneousAnnotations:{},matchedAnnotations:{}};if(void 0===e)return{missingAnnotations:t,extraneousAnnotations:{},matchedAnnotations:{}};if(void 0===t)return{missingAnnotations:{},extraneousAnnotations:e,matchedAnnotations:{}};{const n=Object.keys(e),o=Object.keys(t),s={},i={},r={};for(const l of a.redundantIntersection(n,o))r[l]={expectedAnnotation:t[l],givenAnnotation:e[l]};for(const t of a.redundantDifference(n,o))i[t]=e[t];for(const e of a.redundantDifference(o,n))s[e]=t[e];return{missingAnnotations:s,extraneousAnnotations:i,matchedAnnotations:r}}})(e,t),l={};return Object.entries(b(o,n.fieldFilter)).forEach((([e,{givenAnnotation:t,expectedAnnotation:o}])=>l[e]=_(t,o,n))),Object.entries(b(r,n.fieldFilter)).forEach((([e,t])=>l[e]=A(t,s.GraderResult.Extraneous,n.fieldDefinitions))),Object.entries(b(i,n.fieldFilter)).forEach((([e,t])=>l[e]=A(t,s.GraderResult.Missing,n.fieldDefinitions))),l},k=e=>{let t=!0;for(const[,n]of Object.entries(e))if(s.isFieldSetGraderAnnotation(n)){let e=!0;for(const t of n.response)t.result===s.GraderResult.Matched?(t.hasCorrectChildren=k(t.given),e=e&&t.hasCorrectChildren):e=!1;t=t&&e}else t=t&&n.response.every((e=>e.result===s.GraderResult.Correct));return t},w=e=>{const t={};for(const n of e)if(n.type===r.TextCollectionFieldType.FieldSet||n.type===r.TextCollectionFieldType.Form){const e=w(n.fields);for(const[n,o]of Object.entries(e))t[n]=o}else t[n.field_id]=n;return t};t.getFieldDefinitions=w;const M=e=>{const t={};for(const n of e)if(n.type===r.TextCollectionFieldType.Form){const e=M(n.fields);for(const[n,o]of Object.entries(e))t[n]=o}else t[n.field_id]=n;return t};t.getFieldDefinitionsWithFieldSet=M;t.getTextCollectionGraderDiffResponse=(e,t,n)=>{const o={fieldDefinitions:w(n?.taskFields||[]),fieldFilter:(s=n?.fieldsWhitelist||[],0===s.length?"all_fields":s),context:n};var s;const i=R(e.annotations,t.annotations,o);return k(i),{annotations:i}}},673793:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.textCollectionTransformFn=void 0;var o,s=(o=n(298784))&&o.__esModule?o:{default:o},i=n(952302),r=n(963494),a=n(222357);const l=(e,t,n,o,i,c,d)=>{if(n.type===r.TextCollectionFieldType.RLHFHistory)return[];if(n.type!==r.TextCollectionFieldType.FieldSet)return[{props:{label:e,id:t,parentGiven:c,grandParentGiven:d,textCollectionFieldType:n.type},frames:{0:n}}];const u=[];return n.response.forEach(((e,n)=>{let r=[];const d=e.result===a.GraderResult.Matched;e.result===a.GraderResult.Matched||e.result===a.GraderResult.Extraneous?r=Object.entries(e.given):e.result===a.GraderResult.Missing&&(r=Object.entries(e.expected));const f=s.default.flatMap(r,(([e,s])=>l(e,`${t}/${n}/${e}`,s,o,i,d,c)));u.push(...f)})),u};t.textCollectionTransformFn=async(e,t,n,o)=>{if(!e)return[];const r=o||s.default.cloneDeep(e);return(async(e,t)=>s.default.flatMap(Object.entries(e.annotations),(([e,n],o)=>l(e,e,n,o,t,!0,!0))))(i.getTextCollectionGraderDiffResponse(e,r,n),t)}},885748:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.depthFirstLabelsInheritAttributes=function e(t,n,o){for(const s of t){const t=s.attributes?{...o,...s.attributes}:o,i={name:s.name,attributes:t};if(n.push(i),s.children){const o=e(s.children,n,t);n=[...o]}}return n},t.depthFirstLabels=i,t.mergeLabelAttributes=function(e){const t=function(e){const t=new Map;for(const n of i(e)){const e=t.get(n.name)??[];s.default.each(n.children,(o=>{t.set(o.name,[...e,n])}))}return t}(e),n=new Map;for(const o of i(e)){const e=s.default.map(t.get(o.name),(e=>e.attributes)),i=s.default.compact([...e,o.attributes]);n.set(o.name,s.default.assign({},...i))}return n};var o,s=(o=n(298784))&&o.__esModule?o:{default:o};function*i(e){for(const t of e)yield t,t.children&&(yield*i(t.children))}},64499:function(e,t,n){"use strict";t._W=void 0;var o,s=(o=n(161320))&&o.__esModule?o:{default:o};t._W=(e,t=!1)=>`You failed the scenario ${t?"for this course":""} too many times. You can try again in ${s.default.duration(e).humanize()}`},857428:function(e,t){"use strict";var n;t.S=void 0,t.S=n,function(e){e.Markdown="markdown",e.Video="video"}(n||(t.S=n={}))},204864:function(e,t,n){"use strict";var o=n(127061),s=n(830816).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.sample=function(e,t){const n=e.filter(((e,n)=>n%t===0));(e.length-1)%t>0&&n.push(e[e.length-1]);return n},t.base64StringToTypedArray=function(e,t){if(c){const n=s.from(e,"base64");return new t(n.buffer,n.byteOffset,n.length/t.BYTES_PER_ELEMENT)}{const n=i.default.decode(e);return new t(n)}},t.typedArrayToBase64String=function(e){return c?s.from(e.buffer).toString("base64"):i.default.encode(e.buffer)},t.flattenTypedArrays=function(e,t){if(!e.length)return new t;const n=[];for(const o of e)n.push(...o);return t.from(n)},t.compareS3URLWithoutRegion=function(e,t){const n=y(e),o=y(t);if(void 0===n.Key||void 0===o.Key)return e===t;return n.Bucket===o.Bucket&&n.Key===o.Key},t.fromS3Url=y,t.toS3Url=m,t.s3UrlToHTTPUrl=function(e){const{Bucket:t,Key:n,Region:o}=y(e);if(!t||!n)return e;return m(t,n,"bucket-in-host",o)},t.attemptWithRetry=async function(e,t=60,n=3,o){for(let i=0;i<n;i++)try{return await e()}catch(s){if(!(i+1<n))throw s;o?.(i+1),await g(1e3*t)}throw new Error("impossible")},t.retryWithBackoff=async function(e,t){let n=t?.retries??3,o=t?.delayMs??1e3;const s=t?.maxDelayMs??6e4;let i;t?.disableJitter||await g(1e3*Math.random());for(;n>0;)try{return await e()}catch(r){n--,i=r,await g(o),o=Math.min(2*o,s)}if(void 0!==t?.defaultValue)return t.defaultValue;throw i||new Error("Retry failed with unknown error.")},t.getStackTrace=v,t.getCallSite=function(){const e=v({skipLines:2}),[t,n]=e.split("\n").map((e=>e.split(" ")[1]));return{message:`${t} was called by ${n}`,stack:e,currentFn:t,caller:n}},t.getStackBreadcrumbs=function({logFile:e=!1,skipLines:t=2}={}){const n=v({skipLines:t}).split("\n").map((e=>e.split(" ")[1]));e||n.pop();return r.default.reverse(n).join(" > ")},t.fixStringIndentation=function(e){const t=e.split("\n"),n=t[0].match(/^\s{2,}/g)?.length;if(!n)return e;if(t.every((e=>e.startsWith(t[0].slice(0,n)))))return t.map((e=>e.slice(0,n))).join("\n");return e},t.initializeRecordWithKeysFromEnum=function(e,t){return r.default.fromPairs(r.default.values(e).map((e=>[e,t])))},t.enumValues=function(e){return Object.keys(e).filter((e=>Number.isNaN(+e))).map((t=>e[t]))},t.generateRandomSlug=function(e=12){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";let n="";for(let o=0;o<e;o++){const e=Math.floor(Math.random()*t.length);n+=t.charAt(e)}return n},t.parseAnythingSeparatedIds=t.sleep=t.asyncTimeout=t.mapToTypedArrays=void 0;var i=l(n(188718)),r=l(n(298784)),a=l(n(137131));function l(e){return e&&e.__esModule?e:{default:e}}const c="undefined"!==typeof o?o:0;t.mapToTypedArrays=e=>e.map((e=>Float32Array.from(e)));t.asyncTimeout=async e=>new Promise((t=>setTimeout(t,e)));const d={"(us|eu|ap|sa|ca|me)\\-\\w+\\-\\d+":"amazonaws.com","cn\\-\\w+\\-\\d+":"amazonaws.com.cn","us\\-gov\\-\\w+\\-\\d+":"amazonaws.com","us\\-iso\\-\\w+\\-\\d+":"c2s.ic.gov","us\\-isob\\-\\w+\\-\\d+":"sc2s.sgov.gov"},u="(("+r.default.keys(d).join(")|(")+"))",f="("+r.default.uniq(r.default.values(d)).map((e=>e.replace(/\./g,"\\."))).join("|")+")",p=new RegExp(`^([a-z0-9-.]+).s3([.-](dualstack\\.)?${u})?\\.${f}$`),h=new RegExp(`^s3([.-](dualstack\\.)?${u})?\\.${f}$`);function y(e){const t=a.default.parse(e);try{t.pathname=decodeURIComponent(t.pathname||"")}catch(s){return{Bucket:void 0,Key:void 0,Region:void 0}}if(!t.hostname||!t.pathname)return{Bucket:void 0,Key:void 0,Region:void 0};if("s3:"===t.protocol)return{Bucket:t.hostname,Key:t.pathname.slice(1),Region:void 0};const n=t.hostname.match(p);if(n)return{Bucket:n[1],Key:t.pathname.slice(1),Region:n[4]};const o=t.hostname.match(h);if(o){const e=t.pathname.split("/");return{Bucket:e[1],Key:e.slice(2).join("/"),Region:o[3]}}return{Bucket:void 0,Key:void 0,Region:void 0}}function m(e,t,n="bucket-in-host",o){const s=r.default.find(d,((e,t)=>!!o?.match(new RegExp(`^${t}$`))))??"amazonaws.com",i=encodeURIComponent(t).replace(/%2F/g,"/");switch(n){case"bucket-in-host":return`https://${e}.s3.${o?`${o}.`:""}${s}/${i}`;case"s3":return`s3://${e}/${i}`}}const g=e=>new Promise((t=>{setTimeout(t,e)}));function v({skipLines:e=0}={}){const t=((new Error).stack||"").split("\n").map((e=>e.trim()));return t.splice("Error"===t[0]?2:1).slice(e).join("\n")}t.sleep=g;t.parseAnythingSeparatedIds=e=>{const t=e.match(/[^,\s]+/g)||[];return r.default.uniq(t)}},188718:function(e,t){!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),o=0;o<e.length;o++)n[e.charCodeAt(o)]=o;t.encode=function(t){var n,o=new Uint8Array(t),s=o.length,i="";for(n=0;n<s;n+=3)i+=e[o[n]>>2],i+=e[(3&o[n])<<4|o[n+1]>>4],i+=e[(15&o[n+1])<<2|o[n+2]>>6],i+=e[63&o[n+2]];return s%3===2?i=i.substring(0,i.length-1)+"=":s%3===1&&(i=i.substring(0,i.length-2)+"=="),i},t.decode=function(e){var t,o,s,i,r,a=.75*e.length,l=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var d=new ArrayBuffer(a),u=new Uint8Array(d);for(t=0;t<l;t+=4)o=n[e.charCodeAt(t)],s=n[e.charCodeAt(t+1)],i=n[e.charCodeAt(t+2)],r=n[e.charCodeAt(t+3)],u[c++]=o<<2|s>>4,u[c++]=(15&s)<<4|i>>2,u[c++]=(3&i)<<6|63&r;return d}}()},505940:function(e,t,n){"use strict";n.d(t,{VC:function(){return c}});var o=n(413735),s=n(585912),i={isHistory:e=>(0,o.P)(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(0===e.redos.length||s.OX.isOperationList(e.redos[0]))&&(0===e.undos.length||s.OX.isOperationList(e.undos[0]))},r=(new WeakMap,new WeakMap),a=new WeakMap,l={isHistoryEditor:e=>i.isHistory(e.history)&&s.ML.isEditor(e),isMerging:e=>a.get(e),isSaving:e=>r.get(e),redo(e){e.redo()},undo(e){e.undo()},withoutMerging(e,t){var n=l.isMerging(e);a.set(e,!1),t(),a.set(e,n)},withoutSaving(e,t){var n=l.isSaving(e);r.set(e,!1),t(),r.set(e,n)}},c=e=>{var t=e,{apply:n}=t;return t.history={undos:[],redos:[]},t.redo=()=>{var{history:e}=t,{redos:n}=e;if(n.length>0){var o=n[n.length-1];l.withoutSaving(t,(()=>{s.ML.withoutNormalizing(t,(()=>{for(var e of o)t.apply(e)}))})),e.redos.pop(),e.undos.push(o)}},t.undo=()=>{var{history:e}=t,{undos:n}=e;if(n.length>0){var o=n[n.length-1];l.withoutSaving(t,(()=>{s.ML.withoutNormalizing(t,(()=>{var e=o.map(s.OX.inverse).reverse();for(var n of e)t.apply(n)}))})),e.redos.push(o),e.undos.pop()}},t.apply=e=>{var{operations:o,history:s}=t,{undos:i}=s,r=i[i.length-1],a=r&&r[r.length-1],c=f(e,a),h=l.isSaving(t),y=l.isMerging(t);if(null==h&&(h=u(e)),h){if(null==y&&(y=null!=r&&(0!==o.length||(d(e,a)||c))),r&&y)c&&r.pop(),r.push(e);else{var m=[e];i.push(m)}for(;i.length>100;)i.shift();p(e)&&(s.redos=[])}n(e)},t},d=(e,t)=>"set_selection"===e.type||(!(!t||"insert_text"!==e.type||"insert_text"!==t.type||e.offset!==t.offset+t.text.length||!s.y$.equals(e.path,t.path))||!(!t||"remove_text"!==e.type||"remove_text"!==t.type||e.offset+e.text.length!==t.offset||!s.y$.equals(e.path,t.path))),u=(e,t)=>"set_selection"!==e.type||null!=e.properties&&null!=e.newProperties,f=(e,t)=>!(!t||"set_selection"!==e.type||"set_selection"!==t.type),p=e=>"set_selection"!==e.type}}]);